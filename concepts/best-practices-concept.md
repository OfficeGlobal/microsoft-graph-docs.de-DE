# <a name="best-practices-for-working-with-microsoft-graph"></a><span data-ttu-id="8a354-101">Optimale Methoden für das Arbeiten mit Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="8a354-101">Best practices for working with Microsoft Graph</span></span>

<span data-ttu-id="8a354-102">In diesem Artikel werden bewährte Methoden beschrieben, die Sie anwenden können, damit Ihre Anwendungen Microsoft Graph optimal nutzen, ganz gleich, ob es dabei um mehr Informationen zu Microsoft Graph, das Verbessern der App-Leistung oder darum geht, die Anwendung für Endbenutzer zuverlässiger zu gestalten.</span><span class="sxs-lookup"><span data-stu-id="8a354-102">This article describes best practices that you can apply to help your applications get the most out of Microsoft Graph - whether that involves learning about Microsoft Graph, improving app performance, or making your application more reliable for end users.</span></span>

## <a name="use-graph-explorer-to-get-to-know-the-api"></a><span data-ttu-id="8a354-103">Verwenden von Graph-Explorer, um die API kennenzulernen</span><span class="sxs-lookup"><span data-stu-id="8a354-103">Use Graph Explorer to get to know the API</span></span>

<span data-ttu-id="8a354-104">Der einfachste Weg, um die über Microsoft Graph verfügbaren Daten zu erkunden, besteht darin, [Graph-Explorer](https://aka.ms/ge) zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="8a354-104">The easiest way to start exploring the data available through Microsoft Graph is to use [Graph Explorer](https://aka.ms/ge).</span></span> <span data-ttu-id="8a354-105">Mit Graph-Explorer können Sie REST-Abfragen (mit voller CRUD-Unterstützung) erstellen, die HTTP-Anforderungsheader anpassen und die Datenantworten anzeigen.</span><span class="sxs-lookup"><span data-stu-id="8a354-105">Graph Explorer lets you craft REST requests (with full CRUD support), adapt the HTTP request headers, and see the data responses.</span></span> <span data-ttu-id="8a354-106">Um Ihnen den Einstieg zu erleichtern, stellt Graph-Explorer auch eine Reihe von Beispielabfragen bereit.</span><span class="sxs-lookup"><span data-stu-id="8a354-106">To help you get started, Graph Explorer also provides a set of sample queries.</span></span>

<span data-ttu-id="8a354-107">Experimentieren Sie mit neuen APIs, bevor Sie sie in Ihre Anwendung integrieren.</span><span class="sxs-lookup"><span data-stu-id="8a354-107">Experiment with new APIs before you integrate them into your application.</span></span>

## <a name="authentication"></a><span data-ttu-id="8a354-108">Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="8a354-108">Authentication</span></span>

<span data-ttu-id="8a354-109">Um auf die Daten in Microsoft Graph zuzugreifen, muss Ihre Anwendung ein OAuth 2.0-Zugriffstoken abrufen und dieses Microsoft Graph in einem der folgenden Elemente präsentieren:</span><span class="sxs-lookup"><span data-stu-id="8a354-109">To access the data in Microsoft Graph, your application will need to acquire an OAuth 2.0 access token, and present it to Microsoft Graph in either of the following:</span></span>

- <span data-ttu-id="8a354-110">Dem HTTP-Anforderungsheader für die *Autorisierung*, als *Bearer*token</span><span class="sxs-lookup"><span data-stu-id="8a354-110">The HTTP *Authorization* request header, as a *Bearer* token</span></span>
- <span data-ttu-id="8a354-111">Dem Graph-Clientkonstruktor, wenn Sie eine Microsoft Graph-Clientbibliothek verwenden</span><span class="sxs-lookup"><span data-stu-id="8a354-111">The graph client constructor, when using a Microsoft Graph client library</span></span>

<span data-ttu-id="8a354-112">Verwenden Sie die API der Microsoft-Authentifizierungsbibliothek, [MSAL](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-v2-libraries), um das Zugriffstoken für Microsoft Graph zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="8a354-112">Use the Microsoft Authentication Library API, [MSAL](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-v2-libraries) to acquire the access token to Microsoft Graph.</span></span>

## <a name="consent-and-authorization"></a><span data-ttu-id="8a354-113">Zustimmung und Autorisierung</span><span class="sxs-lookup"><span data-stu-id="8a354-113">Consent and authorization</span></span>

<span data-ttu-id="8a354-114">Wenden Sie die folgenden bewährten Methoden für Zustimmung und Autorisierung in Ihrer App an:</span><span class="sxs-lookup"><span data-stu-id="8a354-114">Apply the following best practices for consent and authorization in your app:</span></span>

- <span data-ttu-id="8a354-115">**Verwenden Sie die niedrigsten Berechtigungen**.</span><span class="sxs-lookup"><span data-stu-id="8a354-115">**Use least privilege**.</span></span> <span data-ttu-id="8a354-116">Fordern Sie nur Berechtigungen an, die unbedingt notwendig sind, und nur dann, wenn Sie sie benötigen.</span><span class="sxs-lookup"><span data-stu-id="8a354-116">Only request permissions that are absolutely necessary, and only when you need them.</span></span> <span data-ttu-id="8a354-117">Für die APIs in Ihren Anwendungsaufrufen überprüfen Sie den Berechtigungsabschnitt im Thema mit den Methoden (sehen Sie sich beispielsweise [Erstellen eines Benutzers](../api-reference/v1.0/api/user_post_users.md) an, und wählen Sie die Berechtigungen mit den geringsten Rechten aus).</span><span class="sxs-lookup"><span data-stu-id="8a354-117">For the APIs your application calls, check the permissions section in the method topics (for example, see [creating a user](../api-reference/v1.0/api/user_post_users.md), and choose the least privileged permissions.</span></span> <span data-ttu-id="8a354-118">Eine vollständige Liste von Berechtigungen finden Sie unter [Berechtigungsreferenz](permissions_reference.md).</span><span class="sxs-lookup"><span data-stu-id="8a354-118">For a full list of permissions, see [permissions reference](permissions_reference.md).</span></span>

- <span data-ttu-id="8a354-119">**Verwenden Sie den entsprechenden Berechtigungstyp basierend auf Szenarien**.</span><span class="sxs-lookup"><span data-stu-id="8a354-119">**Use the correct permission type based on scenarios**.</span></span> <span data-ttu-id="8a354-120">Wenn Sie eine interaktive Anwendung erstellen, bei der es einen angemeldeten Benutzer gibt, sollte die Anwendung *delegierte* Berechtigungen verwenden, sodass der Anwendung die Berechtigung delegiert wird, bei Aufrufen von Microsoft Graph als angemeldeter Benutzer zu fungieren.</span><span class="sxs-lookup"><span data-stu-id="8a354-120">If you're building an interactive application where a signed in user is present, your application should use *delegated* permissions, where the application is delegated permission to act as the signed-in user when making calls to Microsoft Graph.</span></span> <span data-ttu-id="8a354-121">Wenn Ihre Anwendung jedoch ohne angemeldeten Benutzer ausgeführt wird, z. B. als Hintergrunddienst oder Daemon, sollte die Anwendung Anwendungsberechtigungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="8a354-121">If, however, your application runs without a signed-in user, such as a background service or daemon, your application should use application permissions.</span></span>

    ><span data-ttu-id="8a354-122">**Hinweis:** Die Verwendung von Anwendungsberechtigungen für interaktive Szenarien kann für Ihre Anwendung ein Compliance- und Sicherheitsrisiko darstellen.</span><span class="sxs-lookup"><span data-stu-id="8a354-122">**Note:** Using application permissions for interactive scenarios can put your application at compliance and security risk.</span></span> <span data-ttu-id="8a354-123">Die Berechtigungen eines Benutzers könnten versehentlich erhöht werden, sodass dieser auf Daten zugreifen kann, wodurch die von einem Administrator konfigurierten Richtlinien umgangen werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-123">It can inadvertantly elevate a user's privileges to access data, circumnavigating policies configured by an administrator.</span></span>
<!-- LG: Use a more clear lead-in here, like "Consider the end user and admin experience"? -->
- <span data-ttu-id="8a354-124">**Gehen Sie beim Konfigurieren Ihr App mit Bedacht vor**.</span><span class="sxs-lookup"><span data-stu-id="8a354-124">**Be thoughtful when configuring your app**.</span></span> <span data-ttu-id="8a354-125">Dies wirkt sich direkt auf die Erfahrung von Endbenutzern und Administratoren sowie auf die Akzeptanz und die Sicherheit der Anwendung aus.</span><span class="sxs-lookup"><span data-stu-id="8a354-125">This will directly affect end user and admin experiences, along with application adoption and security.</span></span> <span data-ttu-id="8a354-126">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="8a354-126">For example:</span></span>

    - <span data-ttu-id="8a354-127">Die Datenschutzrichtlinie Ihrer Anwendung, die Nutzungsbedingungen, der Name, das Logo und die Domäne werden in Zustimmungs- und anderen Oberflächen angezeigt. Stellen Sie daher sicher, dass sie diese sorgfältig konfigurieren, damit bei Ihren Endbenutzern keine Missverständnisse entstehen.</span><span class="sxs-lookup"><span data-stu-id="8a354-127">Your application's privacy statement, terms of use, name, logo and domain will show up in consent and other experiences - so make sure to configure these carefully so they are understood by your end-users.</span></span>
    - <span data-ttu-id="8a354-128">Überlegen Sie sich, wer Ihrer Anwendung zustimmen soll: Endbenutzer oder Administratoren. Konfigurieren Sie die Anwendung dann so, dass [Berechtigungen entsprechend angefordert werden](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-v2-scopes).</span><span class="sxs-lookup"><span data-stu-id="8a354-128">Consider who will be consenting to your application - either end users or administrators - and configure your application to [request permissions appropriately](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-v2-scopes).</span></span>
    - <span data-ttu-id="8a354-129">Sie müssen den Unterschied zwischen [statischer, dynamische und inkrementeller Zustimmung](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-v2-compare#incremental-and-dynamic-consent) verstehen.</span><span class="sxs-lookup"><span data-stu-id="8a354-129">Ensure that you understand the difference between [static, dynamic and incremental consent](https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-v2-compare#incremental-and-dynamic-consent).</span></span>

- <span data-ttu-id="8a354-130">**Erwägen Sie Anwendungen mit mehreren Mandanten**.</span><span class="sxs-lookup"><span data-stu-id="8a354-130">**Consider multi-tenant applications**.</span></span> <span data-ttu-id="8a354-131">Gehen Sie davon aus, dass Kunden verschiedene Anwendungs- und Zustimmungssteuerungen in unterschiedlichen Zuständen haben.</span><span class="sxs-lookup"><span data-stu-id="8a354-131">Expect customers to have various application and consent controls in different states.</span></span> <span data-ttu-id="8a354-132">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="8a354-132">For example:</span></span>

    - <span data-ttu-id="8a354-133">Mandantenadministratoren können die Möglichkeit für Endbenutzer zum Zustimmen von Anwendungen deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="8a354-133">Tenant administrators can disable the ability for end users to consent to applications.</span></span> <span data-ttu-id="8a354-134">In diesem Fall müsste ein Administrator im Namen seiner Benutzer zustimmen.</span><span class="sxs-lookup"><span data-stu-id="8a354-134">In this case, an administrator would need to consent on behalf of their users.</span></span>
    - <span data-ttu-id="8a354-135">Mandantenadministratoren können benutzerdefinierte Autorisierungsrichtlinien festlegen, z. B., dass Benutzer nicht die Profile anderer Benutzer lesen können, oder das Beschränken der Self-Service-Gruppenerstellung auf eine eingeschränkte Gruppe von Benutzern.</span><span class="sxs-lookup"><span data-stu-id="8a354-135">Tenant administrators can set custom authorization policies such as blocking users from reading other user's profiles, or limiting self-service group creation to a limited set of users.</span></span> <span data-ttu-id="8a354-136">In diesem Fall sollte Ihre Anwendung die Fehlerantwort 403 verarbeiten können, wenn sie im Auftrag eines Benutzers handelt.</span><span class="sxs-lookup"><span data-stu-id="8a354-136">In this case, your application should expect to handle 403 error response when acting on behalf of a user.</span></span>

## <a name="handle-responses-effectively"></a><span data-ttu-id="8a354-137">Effizientes Verarbeiten von Anworten</span><span class="sxs-lookup"><span data-stu-id="8a354-137">Handle responses effectively</span></span>

<span data-ttu-id="8a354-138">In Abhängigkeit von den Anforderungen, die an Microsoft Graph gestellt werden, sollten Ihre Anwendungen in der Lage sein, verschiedene Antworttypen zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="8a354-138">Depending on the requests you make to Microsoft Graph, your applications should be prepared to handle different types of responses.</span></span> <span data-ttu-id="8a354-139">Nachfolgend finden Sie einige der wichtigsten Methoden, um sicherzustellen, dass Ihre Anwendung für die Endbenutzer zuverlässig und vorhersehbar reagiert.</span><span class="sxs-lookup"><span data-stu-id="8a354-139">The following are some of the most important practices to follow to ensure that your application behaves reliably and predictably for your end users.</span></span>

### <a name="pagination"></a><span data-ttu-id="8a354-140">Paginierung</span><span class="sxs-lookup"><span data-stu-id="8a354-140">Pagination</span></span>

<span data-ttu-id="8a354-141">Beim Abfragen einer Ressourcensammlung sollten Sie davon ausgehen, dass Microsoft Graph das Resultset aufgrund von serverseitigen Beschränkungen der Seitengröße auf mehreren Seiten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="8a354-141">When querying a resource collection, you should expect that Microsoft Graph will the return result set in multiple pages, due to server-side page size limits.</span></span> <span data-ttu-id="8a354-142">Wenn sich ein Resultset über mehrere Seiten erstreckt, gibt Microsoft Graph eine `@odata.nextLink`-Eigenschaft in der Antwort zurück, die eine URL zu der nächsten Seite mit Ergebnissen enthält.</span><span class="sxs-lookup"><span data-stu-id="8a354-142">When a result set spans multiple pages, Microsoft Graph returns an `@odata.nextLink` property in the response that contains a URL to the next page of results.</span></span>

<span data-ttu-id="8a354-143">Eine Auflistung der Nachrichten angemeldeter Benutzer:</span><span class="sxs-lookup"><span data-stu-id="8a354-143">For example, listing the signed-in users messages:</span></span>

```http
GET https://graph.microsoft.com/v1.0/me/messages
```

<span data-ttu-id="8a354-144">Würde eine Antwort mit einer `@odata.nextLink`-Eigenschaft zurückgeben, wenn das Resultset die serverseitige Beschränkung der Seitengröße überschreitet.</span><span class="sxs-lookup"><span data-stu-id="8a354-144">Would return a response containing an `@odata.nextLink` property, if the result set exceeds the server-side page size limit.</span></span>

```json
"@odata.nextLink": "https://graph.microsoft.com/v1.0/me/messages?$skip=23"
```

><span data-ttu-id="8a354-145">**Hinweis:** Ihre Anwendung sollte **immer** die Möglichkeit verarbeiten, dass die Antworten paginiert sind, und die `@odata.nextLink`-Eigenschaft verwenden, um die nächste paginierte Reihe von Ergebnissen zu erhalten, bis alle Seiten des Resultsets gelesen wurden.</span><span class="sxs-lookup"><span data-stu-id="8a354-145">**Note:** Your application should **always** handle the possibility that the responses are paged in nature, and use the `@odata.nextLink` property to obtain the next paged set of results, until all pages of the result set have been read.</span></span> <span data-ttu-id="8a354-146">Die letzte Seite enthält keine `@odata.nextLink`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="8a354-146">The final page will not contain an `@odata.nextLink` property.</span></span> <span data-ttu-id="8a354-147">Sie sollten die gesamte URL in die `@odata:nextLink`-Eigenschaft in Ihrer Anforderung für die nächste Seite mit Ergebnissen einschließen, wobei die gesamte URL als opake Zeichenfolge behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="8a354-147">You should include the entire URL in the `@odata:nextLink` property in your request for the next page of results, treating the entire URL as an opaque string.</span></span>

<span data-ttu-id="8a354-148">Weitere Informationen finden Sie unter [Paginierung](paging.md).</span><span class="sxs-lookup"><span data-stu-id="8a354-148">For more details, see [paging](paging.md).</span></span>

### <a name="handling-expected-errors"></a><span data-ttu-id="8a354-149">Behandlung erwarteter Fehler</span><span class="sxs-lookup"><span data-stu-id="8a354-149">Handling expected errors</span></span>

<span data-ttu-id="8a354-150">Ihre Anwendung sollte zwar alle Fehlerantworten (in den Bereichen 400 und 500) behandeln, besonderes Augenmerk liegt jedoch auf bestimmten erwarteten Fehlern und Antworten, die in der folgenden Tabelle aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="8a354-150">While your application should handle all error responses (in the 400 and 500 ranges), pay special attention to certain expected errors and responses, listed in the following table.</span></span>

| <span data-ttu-id="8a354-151">Thema</span><span class="sxs-lookup"><span data-stu-id="8a354-151">Topic</span></span>   | <span data-ttu-id="8a354-152">HTTP-Fehlercode</span><span class="sxs-lookup"><span data-stu-id="8a354-152">HTTP error code</span></span>    | <span data-ttu-id="8a354-153">Bewährte Methode</span><span class="sxs-lookup"><span data-stu-id="8a354-153">Best practice</span></span>|
|:-----------|:--------|:----------|
| <span data-ttu-id="8a354-154">Benutzer hat keinen Zugriff</span><span class="sxs-lookup"><span data-stu-id="8a354-154">User does not have access</span></span> | <span data-ttu-id="8a354-155">403</span><span class="sxs-lookup"><span data-stu-id="8a354-155">403</span></span> | <span data-ttu-id="8a354-156">Wenn Ihre Anwendung läuft, könnte dieser Fehler auch dann auftreten, wenn diese die erforderlichen Berechtigungen über eine Zustimmungsoberfläche erhalten hat.</span><span class="sxs-lookup"><span data-stu-id="8a354-156">If your application is up and running, it could encounter this error even if it has been granted the necessary permissions through a consent experience.</span></span>  <span data-ttu-id="8a354-157">In diesem Fall ist es sehr wahrscheinlich, dass der angemeldete Benutzer nicht über Berechtigungen zum Zugreifen auf die angeforderte Ressource verfügt.</span><span class="sxs-lookup"><span data-stu-id="8a354-157">In this case, it's most likely that the signed-in user does not have privileges to access the resource requested.</span></span> <span data-ttu-id="8a354-158">Ihre Anwendung sollte den generischen Fehler „Zugriff verweigert“ für den angemeldeten Benutzer ausgeben.</span><span class="sxs-lookup"><span data-stu-id="8a354-158">Your application should provide a generic "Access denied" error back to the signed-in user.</span></span> |
|<span data-ttu-id="8a354-159">Nicht gefunden (Not Found)</span><span class="sxs-lookup"><span data-stu-id="8a354-159">Not found</span></span>| <span data-ttu-id="8a354-160">404</span><span class="sxs-lookup"><span data-stu-id="8a354-160">404</span></span> | <span data-ttu-id="8a354-161">In bestimmten Fällen wird die angeforderte Ressource möglicherweise nicht gefunden.</span><span class="sxs-lookup"><span data-stu-id="8a354-161">In certain cases, a requested resource might not be found.</span></span> <span data-ttu-id="8a354-162">Vielleicht ist eine Ressource nicht vorhanden, weil sie noch nicht bereitgestellt wurde (z. B. das Foto eines Benutzers) oder weil sie gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="8a354-162">For example a resource might not exist, because it has not yet been provisioned (like a user's photo) or because it has been deleted.</span></span> <span data-ttu-id="8a354-163">Einige gelöschte Ressourcen *können* innerhalb von 30 Tagen nach dem Löschen vollständig wiederhergestellt werden – z. B. Benutzer, Gruppen und Anwendungsressourcen, Ihre Anwendung sollte dies daher auch berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="8a354-163">Some deleted resources *might* be fully restored within 30 days of deletion - such as user, group and application resources, so your application should also take this into account.</span></span>|
|<span data-ttu-id="8a354-164">Drosselung</span><span class="sxs-lookup"><span data-stu-id="8a354-164">Throttling</span></span>|<span data-ttu-id="8a354-165">429</span><span class="sxs-lookup"><span data-stu-id="8a354-165">429</span></span>|<span data-ttu-id="8a354-166">APIs können aus unterschiedlichen Gründen jederzeit eine Drosselung vornehmen, Ihre Anwendung muss daher **immer** in der Lage sein, 429-Antworten zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="8a354-166">APIs might throttle at any time for a variety of reasons, so your application must **always** be prepared to handle 429 responses.</span></span> <span data-ttu-id="8a354-167">Im HTTP-Antwortheader der Fehlerantwort ist das Feld *Retry-After* enthalten.</span><span class="sxs-lookup"><span data-stu-id="8a354-167">This error response includes the *Retry-After* field in the HTTP response header.</span></span> <span data-ttu-id="8a354-168">Das Zurückziehen von Anforderungen mithilfe der Verzögerung *Retry-After* ist die schnellste Möglichkeit zur Wiederherstellung nach einer Drosselung.</span><span class="sxs-lookup"><span data-stu-id="8a354-168">Backing off requests using the *Retry-After* delay is the fastest way to recover from throttling.</span></span> <span data-ttu-id="8a354-169">Weitere Informationen finden Sie unter [Drosselung](throttling.md).</span><span class="sxs-lookup"><span data-stu-id="8a354-169">For more information, see [throttling](throttling.md).</span></span>|
|<span data-ttu-id="8a354-170">Dienst nicht verfügbar (Service Unavailable)</span><span class="sxs-lookup"><span data-stu-id="8a354-170">Service unavailable</span></span>| <span data-ttu-id="8a354-171">503</span><span class="sxs-lookup"><span data-stu-id="8a354-171">503</span></span> | <span data-ttu-id="8a354-172">Dieser Fehler tritt wahrscheinlich auf, weil der Dienst ausgelastet ist.</span><span class="sxs-lookup"><span data-stu-id="8a354-172">This is likely because the services is busy.</span></span> <span data-ttu-id="8a354-173">In diesem Fall sollten Sie die Strategie des Zurückziehens ähnlich wie bei Fehler 429 anwenden.</span><span class="sxs-lookup"><span data-stu-id="8a354-173">You should employ a back-off strategy similar to 429.</span></span> <span data-ttu-id="8a354-174">Außerdem sollten Sie **immer** neue Wiederholanforderungen über eine neue HTTP-Verbindung ausführen.</span><span class="sxs-lookup"><span data-stu-id="8a354-174">Additionally, you should **always** make new retry requests over a new HTTP connection.</span></span>|

### <a name="evolvable-enums"></a><span data-ttu-id="8a354-175">Entwickelbare Enumerationen</span><span class="sxs-lookup"><span data-stu-id="8a354-175">Evolvable enums</span></span>

<span data-ttu-id="8a354-176">Clientanwendungen können durch das Hinzufügen von Membern zu einer vorhandenen Enumeration beschädigt werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-176">Client applications can be broken by the addition of members to an existing enum.</span></span> <span data-ttu-id="8a354-177">Für einige neuere Enumerationen in Microsoft Graph gibt es einen Mechanismus, der das Hinzufügen neuer Member ermöglicht, ohne das hierfür eine wesentliche Änderung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="8a354-177">For some newer enums in Microsoft Graph, a mechanism is available to allow for adding new members without incurring a breaking change.</span></span> <span data-ttu-id="8a354-178">In diesen neueren Enumerationen werden Sie ein *sentinel*-Element namens `unknownFutureValue` bemerken, das bekannte und unbekannte Enumerationsmember abgrenzt.</span><span class="sxs-lookup"><span data-stu-id="8a354-178">On these newer enums, you'll see a common *sentinel* member called `unknownFutureValue` that demarcates known and unknown enum members.</span></span> <span data-ttu-id="8a354-179">Bekannte Member weisen eine niedrigeren Wert als das Sentinel-Member auf, unbekannte Member hingegen einen größeren Wert.</span><span class="sxs-lookup"><span data-stu-id="8a354-179">Known members will have a number less than the sentinel member, while unknown members will be greater in value.</span></span>
<span data-ttu-id="8a354-180">Unbekannte Member werden standardmäßig nicht von Microsoft Graph zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8a354-180">By default, unknown members are not returned by Microsoft Graph.</span></span> <span data-ttu-id="8a354-181">Wenn Ihre Anwendung jedoch so geschrieben wurde, dass das Vorkommen unbekannter Member verarbeitet wird, können unbekannte Enumerationsmember mithilfe des HTTP-Anforderungsheaders *Prefer* empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-181">If, however, your application is written to handle the appearance of unknown members, it can opt-in to receive unknown enum members, using an HTTP *Prefer* request header.</span></span>

><span data-ttu-id="8a354-182">**Hinweis:** Wenn Ihre Anwendung in der Lage ist, unbekannte Enumerationsmember zu verarbeiten, sollte das Abonnieren über den HTTP-Anforderungsheader *prefer* erfolgen: `Prefer: include-unknown-enum-members`.</span><span class="sxs-lookup"><span data-stu-id="8a354-182">**Note:** If your application is prepared to handle unknown enum members, it should opt-in by using an HTTP *prefer* request header: `Prefer: include-unknown-enum-members`.</span></span>

## <a name="storing-data-locally"></a><span data-ttu-id="8a354-183">Lokales Speichern von Daten</span><span class="sxs-lookup"><span data-stu-id="8a354-183">Storing data locally</span></span>

<span data-ttu-id="8a354-184">Im Idealfall sollte Ihre Anwendung Aufrufe von Microsoft Graph zum Abrufen von Daten in Echtzeit tätigen, wenn erforderlich.</span><span class="sxs-lookup"><span data-stu-id="8a354-184">Your application should ideally make calls to Microsoft Graph to retrieve data in real time as necessary.</span></span> <span data-ttu-id="8a354-185">Daten sollten nur dann zwischengespeichert oder lokal gespeichert werden, wenn dies für ein bestimmtes Szenario erforderlich ist und wenn dieser Anwendungsfall von Ihren Nutzungsbedingungen und Ihrer Datenschutzbestimmung abgedeckt ist und nicht gegen die [Nutzungsbedingungen Microsoft Graph](https://developer.microsoft.com/en-us/graph/docs/misc/terms-of-use) verstößt.</span><span class="sxs-lookup"><span data-stu-id="8a354-185">You should only cache or store data locally if required for a specific scenario, and if that use case is covered by your terms of use and privacy policy, and does not violate the [Microsoft Graph terms of use](https://developer.microsoft.com/en-us/graph/docs/misc/terms-of-use).</span></span> <span data-ttu-id="8a354-186">Ihre Anwendung sollte auch entsprechende Aufbewahrungs- und Löschrichtlinien implementieren.</span><span class="sxs-lookup"><span data-stu-id="8a354-186">Your application should also implement proper retention and deletion policies.</span></span>

## <a name="optimizations"></a><span data-ttu-id="8a354-187">Optimierungen</span><span class="sxs-lookup"><span data-stu-id="8a354-187">Optimizations</span></span>

<span data-ttu-id="8a354-188">Im Allgemeinen sollten Sie aus Leistungs-, Sicherheits- und Datenschutzgründen nur die Daten abrufen, die Ihre Anwendung wirklich benötigt und nicht mehr.</span><span class="sxs-lookup"><span data-stu-id="8a354-188">In general, for performance and even security or privacy reasons, you should only get the data your application really needs, and nothing more.</span></span>

### <a name="use-projections"></a><span data-ttu-id="8a354-189">Verwenden von Prognosen</span><span class="sxs-lookup"><span data-stu-id="8a354-189">Use projections</span></span>

<span data-ttu-id="8a354-190">Wählen Sie nur die Eigenschaften aus, die Ihre Anwendung wirklich benötigt, da dadurch unnötiger Netzwerkverkehr und unnötige Datenverarbeitungen in Ihrer Anwendung (und im Dienst) verhindert werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-190">Choose only the properties your application really needs and no more, because this saves unnecessary network traffic and data processing in your application (and in the service).</span></span>

><span data-ttu-id="8a354-191">**Hinweis:** Verwenden Sie den `$select`-Abfrageparameter, um die von einer Abfrage zurückgegebenen Eigenschaften auf diejenigen zu beschränken, die von Ihrer App benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-191">**Note:** Use the `$select` query parameter to limit the properties returned by a query to those needed by your application.</span></span>

<span data-ttu-id="8a354-192">Wenn Sie z. B. die Nachrichten des angemeldeten Benutzers abrufen, können Sie angeben, dass nur die Eigenschaften **from** und **subject** zurückgegeben werden:</span><span class="sxs-lookup"><span data-stu-id="8a354-192">For example, when retrieving the messages of the signed-in user, you can specify that only the **from** and **subject** properties be returned:</span></span>

```http
GET https://graph.microsoft.com/v1.0/me/messages?$select=from,subject
```

### <a name="getting-minimal-responses"></a><span data-ttu-id="8a354-193">Abrufen minimaler Antworten</span><span class="sxs-lookup"><span data-stu-id="8a354-193">Getting minimal responses</span></span>

<span data-ttu-id="8a354-194">Für einige Vorgänge, z. B. PUT und PATCH (und in einigen Fällen POST), können Sie die API auffordern, minimale Daten zurückzugeben, wenn die Anwendung keine Antwortnutzlast nutzen muss.</span><span class="sxs-lookup"><span data-stu-id="8a354-194">For some operations, such as PUT and PATCH (and in some cases POST), if your application doesn't need to make use of a response payload, you can ask the API to return minimal data.</span></span> <span data-ttu-id="8a354-195">Beachten Sie, dass einige Dienste bereits die Antwort 204 „Kein Inhalt“ für PUT- und PATCH-Vorgänge zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="8a354-195">Note that some services already return a 204 No Content response for PUT and PATCH operations.</span></span>

><span data-ttu-id="8a354-196">**Hinweis:** Fordern Sie ggf. minimale Darstellungsantworten mithilfe eines HTTP-Anforderungsheaders an: *Prefer: return=minimal*.</span><span class="sxs-lookup"><span data-stu-id="8a354-196">**Note:** Request minimal representation responses using an HTTP request header where appropriate: *Prefer: return=minimal*.</span></span> <span data-ttu-id="8a354-197">Beachten Sie, dass dies für Erstellungsvorgänge möglicherweise nicht geeignet ist, da Ihre Anwendung vielleicht erwartet, dass der Dienst `id` für das neu erstellte Objekt in der Antwort generiert wird.</span><span class="sxs-lookup"><span data-stu-id="8a354-197">Note that for creation operations, this might not be appropriate because your application may expect to get the service generated `id` for the newly created object in the response.</span></span>

### <a name="track-changes-delta-query-and-webhook-notifications"></a><span data-ttu-id="8a354-198">Nachverfolgen von Änderungen: Delta-Abfrage und Webhook-Benachrichtigungen</span><span class="sxs-lookup"><span data-stu-id="8a354-198">Track changes: delta query and webhook notifications</span></span>

<span data-ttu-id="8a354-199">Wenn Ihre Anwendung über Änderungen an Daten informiert sein muss, können Sie eine Webhook-Benachrichtigung erhalten, wenn sich Daten geändert haben.</span><span class="sxs-lookup"><span data-stu-id="8a354-199">If your application needs to know about changes to data, you can get a webhook notification whenever data of interest has changed.</span></span> <span data-ttu-id="8a354-200">Dies ist effizienter als das bloße Abfragen in regelmäßigen Abständen.</span><span class="sxs-lookup"><span data-stu-id="8a354-200">This is more efficient than simply polling on a regular basis.</span></span>

<span data-ttu-id="8a354-201">Verwenden Sie [Webhook-Benachrichtigungen](../api-reference/v1.0/resources/webhooks.md), um Pushbenachrichtigungen zu erhalten, wenn sich Daten geändert werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-201">Use [webhook notifications](../api-reference/v1.0/resources/webhooks.md) to get push notifications when data changes.</span></span>

<span data-ttu-id="8a354-202">Wenn Ihre Anwendung Microsoft Graph-Daten lokal zwischenspeichern oder speichern, diese Daten auf dem neuesten Stand halten oder aus anderen Gründen Änderungen an Daten verfolgen muss, sollten Sie eine Delta-Abfrage verwenden.</span><span class="sxs-lookup"><span data-stu-id="8a354-202">If your application is required to cache or store Microsoft Graph data locally, and keep that data up to date, or track changes to data for any other reasons, you should use delta query.</span></span> <span data-ttu-id="8a354-203">Dadurch werden übermäßige Berechnungen von Ihrer Anwendung zum Abrufen von Daten verhindert, über die die Anwendung bereits verfügt, der Netzwerkdatenverkehr minimiert und die Wahrscheinlichkeit reduziert, dass ein Drosselungsschwellenwert erreicht wird.</span><span class="sxs-lookup"><span data-stu-id="8a354-203">This will avoid excessive computation by your application to retrieve data your application already has, minimize network traffic, and reduce the likelihood of reaching a throttling threshold.</span></span>

<span data-ttu-id="8a354-204">Verwenden Sie eine [Delta-Abfrage](delta_query_overview.md), um Daten effizient auf dem neuesten Stand zu halten.</span><span class="sxs-lookup"><span data-stu-id="8a354-204">Use [delta query](delta_query_overview.md) to efficiently keep data up to date.</span></span>

### <a name="using-webhooks-and-delta-query-together"></a><span data-ttu-id="8a354-205">Gemeinsames Verwenden von Webhooks und Delta-Abfragen</span><span class="sxs-lookup"><span data-stu-id="8a354-205">Using webhooks and delta query together</span></span>

<span data-ttu-id="8a354-206">Webhooks und Delta-Abfragen werden häufig in Kombination besser verwendet, denn wenn Sie eine Delta-Abfrage alleine verwenden, müssen Sie das richtige Abfrageintervall ermitteln: wenn dieses zu kurz ist, kommt es zu leeren Antworten, wodurch Ressourcen verschwendet werden, wenn es zu lang ist, führt dies zu veralteten Daten.</span><span class="sxs-lookup"><span data-stu-id="8a354-206">Webhooks and delta query are often used better together, because if you use delta query alone, you need to figure out the right polling interval - too short and this might lead to empty responses which wastes resources, too long and you might end up with stale data.</span></span> <span data-ttu-id="8a354-207">Wenn Sie Webhook-Benachrichtigungen als Auslöser für Aufrufe von Delta-Abfragen verwenden, können Sie die Vorteile von beiden Ansätzen nutzen.</span><span class="sxs-lookup"><span data-stu-id="8a354-207">If you use webhook notifications as the trigger to make delta query calls, you get the best of both worlds.</span></span>

<span data-ttu-id="8a354-208">Verwenden Sie [Webhook-Benachrichtigungen](../api-reference/v1.0/resources/webhooks.md) als Auslöser für Aufrufe von Delta-Abfragen.</span><span class="sxs-lookup"><span data-stu-id="8a354-208">Use [webhook notifications](../api-reference/v1.0/resources/webhooks.md) as the trigger to make delta query calls.</span></span> <span data-ttu-id="8a354-209">Sie sollten auch sicherstellen, dass Ihre Anwendung einen Abfrageschwellenwert aufweist, für den Fall, dass keine Benachrichtigungen ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-209">You should also ensure that your application has a backstop polling threshold, in case no notifications are triggered.</span></span>

### <a name="batching"></a><span data-ttu-id="8a354-210">Batchverarbeitung</span><span class="sxs-lookup"><span data-stu-id="8a354-210">Batching</span></span>

<span data-ttu-id="8a354-211">Die JSON-Batchverarbeitung ermöglicht es Ihnen, Ihre Anwendung durch Kombinieren von mehreren Anforderungen in einem einzigen JSON-Objekt zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="8a354-211">JSON batching allows you to optimize your application by combining multiple requests into a single JSON object.</span></span> <span data-ttu-id="8a354-212">Indem Sie die einzelnen Anforderungen in einer einzigen Batchanforderung kombinieren, können Sie die Netzwerklatenz der Anwendung erheblich reduzieren und Verbindungsressourcen einsparen.</span><span class="sxs-lookup"><span data-stu-id="8a354-212">Combining individual requests into a single batch request can save the application significant network latency and can conserve connection resources.</span></span>

<span data-ttu-id="8a354-213">Verwenden Sie die [Batchverarbeitung](json_batching.md), wenn eine erhebliche Netzwerklatenz wesentliche Auswirkungen auf die Leistung haben kann.</span><span class="sxs-lookup"><span data-stu-id="8a354-213">Use [batching](json_batching.md) where significant network latency can have a big impact on the performance.</span></span>

## <a name="reliability-and-support"></a><span data-ttu-id="8a354-214">Zuverlässigkeit und Support</span><span class="sxs-lookup"><span data-stu-id="8a354-214">Reliability and support</span></span>
<span data-ttu-id="8a354-215">So stellen Sie sicher, dass Zuverlässigkeit und Support für Ihre Anwendung gewährleistet sind:</span><span class="sxs-lookup"><span data-stu-id="8a354-215">To ensure reliability and facilitate support for your application:</span></span>

- <span data-ttu-id="8a354-216">Berücksichtigen Sie die DNS-TTL, und legen Sie die Verbindungs-TTL entsprechend fest.</span><span class="sxs-lookup"><span data-stu-id="8a354-216">Honor DNS TTL and set connection TTL to match it.</span></span> <span data-ttu-id="8a354-217">Dadurch wird die Verfügbarkeit im Falle eines Failovers sichergestellt.</span><span class="sxs-lookup"><span data-stu-id="8a354-217">This ensures availability in case of failovers.</span></span>
- <span data-ttu-id="8a354-218">Öffnen Sie Verbindungen für alle angekündigten DNS-Antworten.</span><span class="sxs-lookup"><span data-stu-id="8a354-218">Open connections to all advertised DNS answers.</span></span>
- <span data-ttu-id="8a354-219">Protokollieren Sie immer die *request-id* und den *timestamp* aus dem HTTP-Antwortheader.</span><span class="sxs-lookup"><span data-stu-id="8a354-219">Always log the *request-id* and *timestamp* from the HTTP response header.</span></span> <span data-ttu-id="8a354-220">Dies ist erforderlich, wenn Fehler oder Berichterstellungsprobleme in Stack Overflow oder an den Microsoft-Kundensuport eskaliert werden.</span><span class="sxs-lookup"><span data-stu-id="8a354-220">This is required when escalating issues or reporting issues in Stack Overflow or to Microsoft Customer Support.</span></span>
