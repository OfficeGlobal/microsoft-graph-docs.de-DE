# <a name="integrate-microsoft-graph-security-api-alerts-with-your-siem-using-azure-monitor"></a><span data-ttu-id="6c2c2-101">Integration von Microsoft Graph-Sicherheits-API-Warnungen mit Ihrem SIEM mithilfe von Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="6c2c2-101">Integrate security API alerts with your SIEM using Azure Monitor</span></span>

<span data-ttu-id="6c2c2-102">Die Microsoft Graph-Sicherheits-API ermöglicht die Verwaltung von Sicherheitswarnungen aus allen Microsoft Sicherheitsprodukten, die als Anbieter bekannt sind, über einen einzelnen REST-Endpunkt.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-102">The Microsoft Graph Security API enables managing security alerts from all Microsoft security products, known as providers, through a single REST endpoint.</span></span> <span data-ttu-id="6c2c2-103">Einige Organisationen nehmen möglicherweise bereits Azure-spezifische Protokolldaten über Azure Monitor in SIEM-Lösungen auf.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-103">Some organizations might already ingest Azure specific log data through Azure Monitor into SIEM solutions.</span></span> <span data-ttu-id="6c2c2-104">Um die Integration zu vereinfachen, können die über die Microsoft Graph Security API verfügbaren Sicherheitswarnungen auch vom Kunden über Azure Monitor für sein Abonnement zur Verfügung gestellt werden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-104">To simplify integration, the security alerts available through the Microsoft Graph Security API may also be provisioned by the customer to their subscription via Azure Monitor.</span></span> <span data-ttu-id="6c2c2-105">Wenn Ihre Organisation die Azure Monitor-Integration mit Ihrer SIEM-Lösung bereits konfiguriert hat, können Sie jetzt ganz einfach die Sicherheitswarnungen Ihrer Organisation den Daten hinzufügen, die über Azure Monitor verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-105">If your organization has already configured Azure Monitor integration with your SIEM solution, you can now easily add your organization’s security alerts to the data available through Azure Monitor.</span></span> <span data-ttu-id="6c2c2-106">Dieser Artikel führt Sie durch die Schritte, die zur Umsetzung dieser Integration erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-106">This article will guide you through the steps to enable this integration.</span></span>

<span data-ttu-id="6c2c2-107">Azure Monitor unterstützt Connectors für mehrere SIEM-Produkte.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-107">Azure Monitor supports connectors to several SIEM products.</span></span> <span data-ttu-id="6c2c2-108">Eine Liste der unterstützten SIEM-Produkte finden Sie unter [Überwachungsdaten an einen Ereignis-Hub senden](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitor-stream-monitoring-data-event-hubs#what-can-i-do-with-the-monitoring-data-being-sent-to-my-event-hub).</span><span class="sxs-lookup"><span data-stu-id="6c2c2-108">A list of supported SIEM products can be found in [Send monitoring data to an event hub](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/monitor-stream-monitoring-data-event-hubs#what-can-i-do-with-the-monitoring-data-being-sent-to-my-event-hub).</span></span> <span data-ttu-id="6c2c2-109">Die Anweisungen in Schritt 1 und 2 dieses Artikels verweisen auf alle Azure Monitor-Connectors, die Verbrauch über Ereignis-Hubs unterstützen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-109">The instructions in Steps 1 and 2 of this article refer to all Azure Monitor connectors that support consumption via event hubs.</span></span> <span data-ttu-id="6c2c2-110">Dieser Artikel beschreibt die Ende-zu-Ende-Integration des Splunk SIEM-Verbinders.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-110">This article describes the end-to-end configuration for the Splunk SIEM connector.</span></span>

<span data-ttu-id="6c2c2-111">Der Integrationsvorgang umfasst die folgenden Schritte:</span><span class="sxs-lookup"><span data-stu-id="6c2c2-111">The integration process involves the following steps:</span></span>

1. [<span data-ttu-id="6c2c2-112">Einrichten des Azure Event Hubs zum Empfangen von Sicherheitswarnungen für den Mandanten</span><span class="sxs-lookup"><span data-stu-id="6c2c2-112">Set up Azure your event hub to receive security alerts for your tenant</span></span>](#step-1-set-up-an-event-hubs-namespace-in-azure-to-receive-security-alerts-for-your-tenant)
2. [<span data-ttu-id="6c2c2-113">Konfigurieren von Azure Monitor zum Senden von Sicherheitswarnungen vom Mandanten an den Event Hub</span><span class="sxs-lookup"><span data-stu-id="6c2c2-113">Configure Azure Monitor to send security alerts from your tenant to the event hub</span></span>](#step-2-configure-azure-monitor-to-send-security-alerts-from-your-tenant-to-the-event-hub)
3. [<span data-ttu-id="6c2c2-114">Herunterladen und Installieren des Azure Monitor-Add-Ons für Splunk, das es Splunk ermöglicht, Sicherheitswarnungen zu verbrauchen</span><span class="sxs-lookup"><span data-stu-id="6c2c2-114">Download and install the Azure Monitor Add-on for Splunk which will allow Splunk to consume security alerts</span></span>](#step-3-download-and-install-the-azure-monitor-add-on-for-splunk-which-will-allow-splunk-to-consume-security-alerts)
4. [<span data-ttu-id="6c2c2-115">Registrieren einer Anwendung bei dem Azure Active Directory des Mandanten, das Splunk verwendet, um Lesevorgänge vom Event Hub durchzuführen</span><span class="sxs-lookup"><span data-stu-id="6c2c2-115">Register an application with your tenant Azure Active Directory which Splunk will use to read from the event hub</span></span>](#step-4-register-an-application-with-your-tenant-azure-active-directory-which-splunk-will-use-to-read-from-the-event-hub )
5. [<span data-ttu-id="6c2c2-116">Erstellen eines Azure Key Vault zum Speichern der Zugriffsschlüssel für den Event Hub</span><span class="sxs-lookup"><span data-stu-id="6c2c2-116">Create an Azure Key vault to store the access key for the event hub</span></span>](#step-5-create-an-azure-key-vault-to-store-the-access-key-for-the-event-hub)
6. [<span data-ttu-id="6c2c2-117">Konfigurieren der Splunk-Dateneingaben zum Verbrauchen von Sicherheitswarnungen, die im Event Hub gespeichert sind</span><span class="sxs-lookup"><span data-stu-id="6c2c2-117">Configure the Splunk data inputs to consume security alerts stored in the event hub</span></span>](#step-6-configure-the-splunk-data-inputs-to-consume-security-alerts-stored-in-the-event-hub)

<span data-ttu-id="6c2c2-118">Nachdem Sie diese Schritte durchgeführt haben, verbraucht Ihre Splunk Enterprise die Sicherheitswarnungen aller Sicherheitsprodukte, die in Microsoft Graph integriert sind und für die Ihr Mandant lizenziert ist.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-118">After you complete these steps, your Splunk Enterprise will consume security alerts from all the Microsoft Graph integrated security products for which your tenant is licensed.</span></span> <span data-ttu-id="6c2c2-119">Alle neuen Sicherheitsprodukte, die Sie lizenzieren, senden ebenfalls Warnungen über diese Verbindung, und zwar in demselben Schema und ohne weiteren Integrationsaufwand.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-119">Any new security products that you license will also send alerts through this connection, in the same schema with no further integration work needed.</span></span>

## <a name="step-1-set-up-an-event-hubs-namespace-in-azure-to-receive-security-alerts-for-your-tenant"></a><span data-ttu-id="6c2c2-120">Schritt 1: Einrichten eines Event Hub-Namespace in Azure zum Empfangen von Sicherheitswarnungen für Ihren Mandanten</span><span class="sxs-lookup"><span data-stu-id="6c2c2-120">Step 1: Set up an Event Hubs namespace in Azure to receive security alerts for your tenant</span></span>

<span data-ttu-id="6c2c2-121">Sie müssen zunächst einen Microsoft Azure Event Hub-Namespace und einen Event Hub erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-121">To begin, you need to create a Microsoft Azure Event Hubs namespace and event hub.</span></span> <span data-ttu-id="6c2c2-122">Dieser Namespace und Event Hub ist das Ziel für alle Sicherheitswarnungen in Ihrer Organisation.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-122">This namespace and event hub is the destination for all your organization’s security alerts.</span></span> <span data-ttu-id="6c2c2-123">Ein Event Hub-Namespace ist eine logische Gruppierung von Event Hubs, die dieselbe Zugriffsrichtlinie verwenden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-123">An Event Hubs namespace is a logical grouping of event hubs that share the same access policy.</span></span> <span data-ttu-id="6c2c2-124">Beachten Sie einige Details zum Event Hub-Namespace und den Event Hubs, die Sie erstellen:</span><span class="sxs-lookup"><span data-stu-id="6c2c2-124">Note a few details about the Event Hubs namespace and event hubs that you create:</span></span>

- <span data-ttu-id="6c2c2-125">Wir empfehlen die Verwendung eines standardmäßigen Event Hub-Namespace, insbesondere dann, wenn Sie andere Azure-Überwachungsdaten über dieselben Event Hubs senden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-125">We recommend using a Standard Event Hubs namespace, particularly if you are sending other Azure monitoring data through these same event hubs.</span></span>
- <span data-ttu-id="6c2c2-126">In der Regel ist nur eine Durchsatzeinheit erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-126">Typically, only one throughput unit is necessary.</span></span> <span data-ttu-id="6c2c2-127">Wenn sich die Nutzung erhöht und sie nach oben skalieren müssen, können Sie die Anzahl der Durchsatzeinheiten für den Namespace später immer noch manuell erhöhen oder die automatische Erhöhung aktivieren.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-127">If you need to scale up as your usage increases, you can always manually increase the number of throughput units for the namespace later or enable auto inflation.</span></span>
- <span data-ttu-id="6c2c2-128">Die Anzahl der Durchsatzeinheiten ermöglicht Ihnen, den Durchsatzmaßstab für die Event Hubs zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-128">The number of throughput units allows you to increase throughput scale for your event hubs.</span></span> <span data-ttu-id="6c2c2-129">Die Anzahl der Partitionen ermöglicht Ihnen, den Verbrauch für viele Kunden zu parallelisieren.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-129">The number of partitions allows you to parallelize consumption across many consumers.</span></span> <span data-ttu-id="6c2c2-130">Eine einzelne Partition kann bis zu 20 MBit/s erzielen bzw. ungefähr 20.000 Nachrichten pro Sekunde.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-130">A single partition can do up to 20MBps, or approximately 20,000 messages per second.</span></span> <span data-ttu-id="6c2c2-131">Abhängig von dem Tool, das die Daten verbraucht, wird der Verbrauch durch mehrere Partitionen unterstützt oder auch nicht.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-131">Depending on the tool consuming the data, it may or may not support consuming from multiple partitions.</span></span> <span data-ttu-id="6c2c2-132">Wenn Sie nicht sicher sind, wie viele Partitionen Sie festlegen sollen, empfehlen wir, mit vier Partitionen zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-132">If you're not sure about the number of partitions to set, we recommend starting with four partitions.</span></span>
- <span data-ttu-id="6c2c2-133">Wir empfehlen, dass Sie die Nachrichtenaufbewahrung für Ihren Event Hub auf 7 Tage festlegen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-133">We recommend that you set message retention on your event hub to 7 days.</span></span> <span data-ttu-id="6c2c2-134">Sollte das verbrauchende Tool länger als einen Tag ausfällt, wird hierdurch sichergestellt, dass das Tool dort fortfahren kann, wo es aufgehört hat (für Ereignissen, die bis zu sieben Tage alt sind).</span><span class="sxs-lookup"><span data-stu-id="6c2c2-134">If your consuming tool goes down for more than a day, this ensures that the tool can pick up where it left off (for events up to 7 days old).</span></span>
- <span data-ttu-id="6c2c2-135">Wir empfehlen die Verwendung der standardmäßigen Consumergruppe für Ihren Event Hub.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-135">We recommend using the default consumer group for your event hub.</span></span> <span data-ttu-id="6c2c2-136">Sie müssen keine anderen Consumergruppen erstellen und keine separate Consumergruppe verwenden, es sei denn, Sie haben zwei verschiedene Tools, die dieselben Daten von demselben Event Hub verbrauchen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-136">You don't need to create other consumer groups or use a separate consumer group unless you plan to have two different tools consume the same data from the same event hub.</span></span>
- <span data-ttu-id="6c2c2-137">In der Regel müssen Port 5671 und 5672 auf dem Computer geöffnet sein, der die Daten vom Event Hub verbraucht.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-137">Typically, port 5671 and 5672 must be opened on the machine consuming data from the event hub.</span></span>

<span data-ttu-id="6c2c2-138">Weitere Informationen finden sie auch unter [Häufig gestellte Fragen zu Azure Event Hubs](https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-faq).</span><span class="sxs-lookup"><span data-stu-id="6c2c2-138">Also see the [Azure Event Hubs FAQ](https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-faq).</span></span>

1. <span data-ttu-id="6c2c2-139">Melden Sie sich beim [Azure-Portal](https://portal.azure.com/) an, und wählen Sie **Ressource erstellen** oben links auf dem Bildschirm.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-139">Log on to the [Azure portal](https://portal.azure.com/) and choose **Create a resource** at the top left of the screen.</span></span>

    ![Bild zu „Ressource erstellen“](../concepts/images/create-resource.png)

2. <span data-ttu-id="6c2c2-141">Wählen Sie **Internet of Things** und dann **Event Hubs**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-141">Select **Internet of Things** and choose **Event Hubs**.</span></span>

    ![Abbildung zu Event Hubs](../concepts/images/event-hubs.png)

3. <span data-ttu-id="6c2c2-143">Geben Sie unter **Namespace erstellen** einen Namen für den Namespace ein.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-143">In **Create namespace**, enter a namespace name.</span></span> <span data-ttu-id="6c2c2-144">Nachdem Sie sichergestellt haben, dass der Name des Namespace verfügbar ist, wählen Sie den Tarif aus (Basic oder Standard).</span><span class="sxs-lookup"><span data-stu-id="6c2c2-144">After making sure the namespace name is available, choose the pricing tier (Basic or Standard).</span></span> <span data-ttu-id="6c2c2-145">Wählen Sie außerdem ein Azure-Abonnement, eine Ressourcengruppe und einen Speicherort, an dem die Ressource erstellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-145">Also, choose an Azure subscription, resource group, and location in which to create the resource.</span></span> <span data-ttu-id="6c2c2-146">Wählen Sie **Erstellen**, um den Namespace zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-146">Choose **Create** to create the namespace.</span></span> <span data-ttu-id="6c2c2-147">Sie müssen möglicherweise einige Minuten warten, bis das System die Ressourcen vollständig bereitgestellt hat.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-147">You might have to wait a few minutes for the system to fully provision the resources.</span></span>

    ![Abbildung zu „Namespace erstellen“](../concepts/images/create-namespace.png)

## <a name="step-2-configure-azure-monitor-to-send-security-alerts-from-your-tenant-to-the-event-hub"></a><span data-ttu-id="6c2c2-149">Schritt 2: Konfigurieren von Azure Monitor zum Senden von Sicherheitswarnungen vom Mandanten an den Event Hub</span><span class="sxs-lookup"><span data-stu-id="6c2c2-149">Step 2: Configure Azure Monitor to send security alerts from your tenant to the event hub</span></span>

<span data-ttu-id="6c2c2-150">Das Aktivieren des Streamings von Sicherheitswarnungen Ihrer Organisation über Azure Monitor erfolgt einmal für den gesamten Azure Active Directory (Azure AD)-Mandanten.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-150">Enabling the streaming of your organization’s security alerts through Azure Monitor is done one time for your entire Azure Active Directory (Azure AD) tenant.</span></span> <span data-ttu-id="6c2c2-151">Alle Produkte, die für die Sicherheits-API lizenziert und aktiviert sind, beginnen mit dem Senden von Sicherheitswarnungen an Azure Monitor, wobei die Daten an die verbrauchenden Anwendungen gestreamt werden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-151">All security API licensed and enabled products will begin sending security alerts to Azure Monitor, streaming data to consuming applications.</span></span> <span data-ttu-id="6c2c2-152">Alle zusätzlichen API-fähigen Produkte, die von Ihrer Organisation lizenziert und bereitgestellt werden, streamen automatisch Sicherheitswarnungen über dieselbe Azure Monitor-Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-152">Any additional security API-enabled products licensed and deployed by your organization will automatically stream security alerts through this same Azure Monitor configuration.</span></span> <span data-ttu-id="6c2c2-153">Es ist kein weiterer Integrationsaufwand durch Ihre Organisation erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-153">No further integration work is needed from the organization.</span></span>

<span data-ttu-id="6c2c2-154">Sicherheitswarnungen sind Daten mit der höchsten Berechtigungsstufe, die in der Regel nur für Sicherheitsexperten und globale Administratoren in einer Organisation angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-154">Security alerts are highly privileged data typically viewable only by security response personnel and global administrators within an organization.</span></span> <span data-ttu-id="6c2c2-155">Aus diesem Grund benötigen Sie ein globales Administratorkonto für Azure AD, um die erforderlichen Schritte zum Konfigurieren der Integration von Sicherheitswarnungen mit SIEM-Systemen zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-155">For this reason, the steps required to configure the integration of a tenant’s security alerts with SIEM systems require an Azure AD Global Administrator account.</span></span> <span data-ttu-id="6c2c2-156">Sie benötigen dieses Konto nur einmal während des Setups, um anzufordern, dass die Sicherheitswarnungen Ihrer Organisation an Azure Monitor gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-156">This account is only needed one time, during setup, to request your organization’s security alerts be sent to Azure Monitor.</span></span>

> <span data-ttu-id="6c2c2-157">**Hinweis:** Derzeit unterstützt das Azure Monitor Diagnose-Einstellungsblatt nicht die Konfiguration von Ressourcen auf Mandantenebene.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-157">**Note:** At this time, the Azure Monitor Diagnostic settings blade does not allow configuration of tenant-level resources.</span></span> <span data-ttu-id="6c2c2-158">Microsoft Graph Security API-Benachrichtigungen sind eine Ressource auf Mandantenebene, die die Verwendung der Azure-Ressourcen-Manager-API zur Konfiguration von Azure Monitor zur Unterstützung des Verbrauchs der Sicherheitswarnungen Ihres Unternehmens voraussetzt.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-158">Microsoft Graph Security API alerts are a tenant-level resource, which requires using the Azure Resource Manager API to configure Azure Monitor to support consumption of your organization’s security alerts.</span></span>

1. <span data-ttu-id="6c2c2-159">Registrieren Sie in Ihrem Azure-Abonnement „microsoft.insights“ (Azure Monitor) als Ressourcenanbieter.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-159">In your Azure subscription, register "microsoft.insights" (Azure Monitor) as a resource provider.</span></span>  
> <span data-ttu-id="6c2c2-160">**Hinweis:** Registrieren Sie "Microsoft.SecurityGraph" (Microsoft Graph Sicherheits-API) nicht als Ressourcenanbieter in Ihrem Azure-Abonnement, da, wie oben beschrieben, "Microsoft.SecurityGraph" eine Ressource auf Mandantenebene ist.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-160">**Note:** Do not register "Microsoft.SecurityGraph" (Microsoft Graph Security API) as a resource provider in your Azure subscription, as “Microsoft.SecurityGraph” is a tenant-level resource as explained above.</span></span> <span data-ttu-id="6c2c2-161">Die Konfiguration auf Mandantenebene werden ist Teil von Nr. 6 weiter unten.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-161">Tenant level configuration will be part of #6 below.</span></span>

2. <span data-ttu-id="6c2c2-162">Um Azure Monitor mithilfe der Azure Resource Manager-API zu konfigurieren, besorgen Sie sich das [ARMClient](https://github.com/projectkudu/ARMClient)-Tool.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-162">To configure Azure Monitor using the Azure Resource Manager API, obtain the [ARMClient](https://github.com/projectkudu/ARMClient) tool.</span></span> <span data-ttu-id="6c2c2-163">Dieses Tool wird verwendet, um REST-API-Aufrufe über die Befehlszeile an das Azure-Portal zu senden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-163">This tool will be used to send REST API calls to the Azure portal from a command line.</span></span>

3. <span data-ttu-id="6c2c2-164">Erstellen Sie eine JSON-Datei mit Diagnose-Einstellungen wie die folgende:</span><span class="sxs-lookup"><span data-stu-id="6c2c2-164">Prepare a diagnostic setting request JSON file like the following:</span></span>

    ``` json
    {
      "location": "",
      "properties": {
        "name": "securityApiAlerts",
        "serviceBusRuleId": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RESOURCE_GROUP/providers/Microsoft.EventHub/namespaces/EVENT_HUB_NAMESPACE/authorizationrules/RootManageSharedAccessKey",
        "logs": [
          {
            "category": "Alert",
            "enabled": true,
            "retentionPolicy": {
              "enabled": true,
              "days": 7
            }
          }
        ]
      }
    }
    ```

    <span data-ttu-id="6c2c2-165">Ersetzen Sie die Werte in der JSON-Datei wie folgt:</span><span class="sxs-lookup"><span data-stu-id="6c2c2-165">Replace the values in the JSON file as follows:</span></span>

     <span data-ttu-id="6c2c2-166">**SUBSCRIPTION_ID** ist die Abonnement-ID des Azure-Abonnements, das die Ressourcengruppe hostet und der Event Hub-Namespace, an den Sie Sicherheitswarnungen von Ihrer Organisation senden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-166">**SUBSCRIPTION_ID** is the Subscription ID of the Azure subscription hosting the resource group and event hub namespace where you will be sending security alerts from your organization.</span></span>

     <span data-ttu-id="6c2c2-167">**RESOURCE_GROUP** ist die Ressourcengruppe mit dem Ereignis Hub-Namespace, an den Sie Sicherheitswarnungen von Ihrer Organisation senden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-167">**RESOURCE_GROUP** is the resource group containing the event hub namespace where you will be sending security alerts from your organization.</span></span>

     <span data-ttu-id="6c2c2-168">**EVENT_HUB_NAMESPACE** ist der Event Hub-Namespace, an den Sie Sicherheitswarnungen von Ihrer Organisation senden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-168">**EVENT_HUB_NAMESPACE** is the event hub namespace where you will be sending security alerts from your organization.</span></span>

     <span data-ttu-id="6c2c2-169">**“Tage”:** ist die Anzahl der Tage, die Nachrichten im Ereignis-Hub aufbewahrt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-169">**“days”:** 7 is the number of days you want to retain messages in your event hub.</span></span>

4. <span data-ttu-id="6c2c2-170">Speichern Sie die Datei als JSON in dem Verzeichnis, in dem Sie „ARMClient.exe“ aufrufen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-170">Save the file as JSON to the directory where you will invoke ARMClient.exe.</span></span> <span data-ttu-id="6c2c2-171">Nennen Sie die Datei zum Beispiel **AzMonConfig.json.**</span><span class="sxs-lookup"><span data-stu-id="6c2c2-171">For example, name the file **AzMonConfig.json.**</span></span>

5. <span data-ttu-id="6c2c2-172">Führen Sie den folgenden Befehl aus, um sich beim ARMClient-Tool anzumelden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-172">Run the following command to sigh in to the ARMClient tool.</span></span> <span data-ttu-id="6c2c2-173">Sie müssen Anmeldedaten eines globalen Administratorkontos verwenden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-173">You will need to be using Global Administrator account credentials.</span></span>

    ``` shell
    ARMClient.exe login
    ```

6. <span data-ttu-id="6c2c2-174">Führen Sie den folgenden Befehl aus, um Azure Monitor so zu Konfigurieren, dass Sicherheitswarnungen an den Event Hub-Namespace gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-174">Run the following command to configure Azure Monitor to send security alerts to your event hub namespace.</span></span> <span data-ttu-id="6c2c2-175">Dadurch wird automatisch einen Event Hub innerhalb des Namespace bereitgestellt und der Fluss von Sicherheitswarnungen an den Event Hub begonnen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-175">This will automatically provision an event hub within the namespace and start the flow of security alerts into the event hub.</span></span> <span data-ttu-id="6c2c2-176">Stellen Sie sicher, dass der Name der Einstellung (in diesem Beispiel **securityApiAlerts**) dem Einstellungsnamen entspricht, den Sie in der JSON-Datei für das Feld **name** angegeben haben.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-176">Ensure that the setting name (in this example, **securityApiAlerts**) matches the setting name you specified in the JSON file for the **name** field.</span></span>

    ``` shell
    ARMClient.exe put https://management.azure.com/providers/Microsoft.SecurityGraph/diagnosticSettings/securityApiAlerts?api-version=2017-04-01-preview  @".\AzMonConfig.json"
    ```

7. <span data-ttu-id="6c2c2-177">Um sicherzustellen, dass die Einstellungen richtig angewendet wurden, führen Sie diesen Befehl aus, und stellen Sie sicher, dass die Ausgabe den JSON-Dateieinstellungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-177">To verify the settings were applied correctly, run this command and verify that the output matches your JSON file settings.</span></span>

    ``` shell
    ARMClient.exe get https://management.azure.com/providers/Microsoft.SecurityGraph/diagnosticSettings/securityApiAlerts?api-version=2017-04-01-preview
    ```
8. <span data-ttu-id="6c2c2-178">Beenden Sie das ARMClient-Tool.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-178">Exit the ARMClient tool.</span></span> <span data-ttu-id="6c2c2-179">Sie haben jetzt die Konfiguration von Azure Monitor zum Senden von Sicherheitswarnungen von Mandanten an den Event Hub abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-179">You have now completed the configuration of Azure Monitor to send security alerts from your tenant to event hub.</span></span>

## <a name="step-3-download-and-install-the-azure-monitor-add-on-for-splunk-which-will-allow-splunk-to-consume-security-alerts"></a><span data-ttu-id="6c2c2-180">Schritt 3: Herunterladen und Installieren des Azure Monitor-Add-Ons für Splunk, das es Splunk ermöglicht, Sicherheitswarnungen zu verbrauchen</span><span class="sxs-lookup"><span data-stu-id="6c2c2-180">Step 3: Download and install the Azure Monitor Add-on for Splunk which will allow Splunk to consume security alerts</span></span>

1. <span data-ttu-id="6c2c2-181">Diese Integration unterstützt nur Splunk Enterprise-Bereitstellungen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-181">This integration only supports Splunk Enterprise deployments.</span></span>
2. <span data-ttu-id="6c2c2-182">Laden Sie das [Azure Monitor-Add-On für Splunk](https://github.com/Microsoft/AzureMonitorAddonForSplunk) herunter, und installieren Sie es.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-182">Download and install the [Azure Monitor Add-on for Splunk](https://github.com/Microsoft/AzureMonitorAddonForSplunk).</span></span> <span data-ttu-id="6c2c2-183">Ausführliche Installationsanweisungen finden Sie unter [Installation](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Installation).</span><span class="sxs-lookup"><span data-stu-id="6c2c2-183">For detailed installation instructions, see [Installation](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Installation).</span></span> <span data-ttu-id="6c2c2-184">**Nur Azure Monitor-Add-On für Splunk Version 1.2.9 oder höher wird unterstützt.**</span><span class="sxs-lookup"><span data-stu-id="6c2c2-184">**Only Azure Monitor Add-on for Splunk version 1.2.9 or higher is supported.**</span></span>
3. <span data-ttu-id="6c2c2-185">Führen Sie nach der erfolgreichen Installation von Add-Ons die in [Azure Monitor Add-on Konfiguration Wiki](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Configuration-of-Splunk ) beschriebenen Konfigurationschritte aus, um Splunk zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-185">After successfully installing the Add-on, follow the configuration steps described in the [Azure Monitor add-on configuration wiki](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Configuration-of-Splunk ) to configure Splunk.</span></span>
4. <span data-ttu-id="6c2c2-186">Wie in den Installationsanweisungen zum Add-On angegeben, funktioniert das Add-On, sobald Sie einen Deaktivieren-Aktivieren-Zyklus auf der Seite „Manage Apps“ in Splunk Web ausgeführt  haben.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-186">As indicated in the Add-on installation instructions, the add-on will work by doing a disable/enable cycle on the Manage Apps page in Splunk Web.</span></span> <span data-ttu-id="6c2c2-187">Sie können Splunk auch neu starten.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-187">Or, you can restart Splunk.</span></span>

## <a name="step-4-register-an-application-with-your-tenant-azure-active-directory-which-splunk-will-use-to-read-from-the-event-hub"></a><span data-ttu-id="6c2c2-188">Schritt 4: Registrieren einer Anwendung bei dem Azure Active Directory des Mandanten, das Splunk verwendet, um Lesevorgänge vom Event Hub durchzuführen</span><span class="sxs-lookup"><span data-stu-id="6c2c2-188">Step 4: Register an application with your tenant Azure Active Directory which Splunk will use to read from the event hub</span></span>

<span data-ttu-id="6c2c2-189">Splunk benötigt eine Anwendungsregistrierung im Azure Active Directory Ihrer Organisation, um die erforderlichen Berechtigungen und App-Anmeldeinformationen für die Authentifizierung zum Azure Monitor-Ereignis-Hub zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-189">Splunk needs an application registration in your organization’s Azure Active Directory to be granted the required permissions and app credentials required to authenticate to the Azure Monitor event hub.</span></span>

1. <span data-ttu-id="6c2c2-190">Gehen Sie im Azure-Portal zu **App-Registrierungen**, und wählen Sie **Registrierung einer neuen Anwendung** aus.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-190">In the Azure portal, go to **App Registrations** and select **New application registration**.</span></span>

    ![Bild „App-Registrierung“](../concepts/images/app-registration.png)

2. <span data-ttu-id="6c2c2-192">Wählen Sie einen Namen für die Anwendung aus, wählen Sie **Web-App/API** als Typ, und **`http://localhost`** als URL für die Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-192">Select a name for your application, choose **Web app / API** for the type, and **`http://localhost`** for the sign-on URL.</span></span> <span data-ttu-id="6c2c2-193">Wählen Sie dann **Erstellen** aus.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-193">Then select **Create**.</span></span>

    ![Web-API-Konfiguration](../concepts/images/app-web-config.png)

3. <span data-ttu-id="6c2c2-195">Nachdem die Anwendung erstellt wurde, kopieren Sie die **Anwendungs-ID**, und speichern Sie sie zur späteren Verwendung beim Konfigurieren der Splunk Dateneingaben.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-195">After the application is created, copy the **Application ID** and save for later use configuring the Splunk data inputs.</span></span> <span data-ttu-id="6c2c2-196">Wechseln Sie dann zu den Anwendungseinstellungen, und wählen Sie **Schlüssel**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-196">Then go to the application settings and choose **Keys**.</span></span>

    ![Web-App-ID](../concepts/images/app-id.png)

    <span data-ttu-id="6c2c2-198">Hierdurch können Sie einen neuen Schlüssel generieren, der als „geheimer Anwendungsschlüssel“ bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-198">This will allow you to generate a new key, known as an Application Secret.</span></span> <span data-ttu-id="6c2c2-199">Nachdem er generiert wurde, kopieren Sie den **geheimen Anwendungsschlüssel**, und speichern Sie ihn zur späteren Verwendung beim Konfigurieren der Splunk-Dateneingaben.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-199">After it's generated, copy the **Application Secret** and save for later use configuring the Splunk data inputs.</span></span>

4. <span data-ttu-id="6c2c2-200">Erteilen Sie der Anwendung die Rolle **Leser** im Azure-Abonnement mit dem Event Hub, der die Sicherheitswarnungen Ihrer Organisation enthält.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-200">Grant the application the role of **Reader** in the Azure subscription containing the event hub with your organization’s security alerts.</span></span>

    ![Azure-Abo hinzufügen](../concepts/images/add-azure-sub.png)

    <span data-ttu-id="6c2c2-202">Wählen Sie Ihr Abonnement, wählen Sie **Zugriffssteuerung (IAM)**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-202">Select your subscription, choose **Access control (IAM)**.</span></span> <span data-ttu-id="6c2c2-203">Wählen Sie **Hinzufügen**, um Berechtigungen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-203">Select **Add** to add permissions.</span></span> <span data-ttu-id="6c2c2-204">Wählen Sie Ihre Anwendung aus, und wählen Sie als **Rolle** für die Anwendung **Leser**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-204">Select your application and choose the **Role** of **Reader** for your application.</span></span>

    ![Leser-Berechtigung hinzufügen](../concepts/images/add-reader-perms.png)

    <span data-ttu-id="6c2c2-206">Wählen Sie **Speichern**, um die gewährten Berechtigungen der Anwendung zum Abonnement hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-206">Select **Save** to add the permissions granted to your application to the subscription.</span></span>

## <a name="step-5-create-an-azure-key-vault-to-store-the-access-key-for-the-event-hub"></a><span data-ttu-id="6c2c2-207">Schritt 5: Erstellen eines Azure Key Vault zum Speichern der Zugriffsschlüssel für den Event Hub</span><span class="sxs-lookup"><span data-stu-id="6c2c2-207">Step 5: Create an Azure Key vault to store the access key for the event hub</span></span>

<span data-ttu-id="6c2c2-208">Azure Key Vaults dienen zum Speichern von Geheimnissen wie Identitäten, Kennwörtern und Zertifikaten für die Verwendung zur Laufzeit durch Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-208">Azure key vaults are used to store secrets such as identities, passwords, and certificates for use at runtime by applications.</span></span> <span data-ttu-id="6c2c2-209">In diesem Schritt erstellen Sie einen Azure Key Vault zum Speichern der Geheimnisse, die Splunk benötigt, um eine Verbindung mit Azure-Event-Hubs herzustellen und die darin enthaltenen Sicherheitswarnungen zu lesen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-209">In this step you will create an Azure key vault to store the secrets needed for Splunk to connect and read from the Azure event hubs containing your organization’s security alerts.</span></span>

1. <span data-ttu-id="6c2c2-210">Wechseln Sie im Azure-Portal zu **Key Vaults**, und wählen Sie **Hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-210">In the Azure portal, go to **Key vaults** and select **Add**.</span></span>

    ![Key Vaults hinzufügen](../concepts/images/add-key-vaults.png)

2. <span data-ttu-id="6c2c2-212">Wählen Sie beim Erstellen des neuen Key Vaults **Zugriffsrichtlinien**, um eine neue Zugriffsrichtlinie für die Anwendung hinzuzufügen, die Sie gerade in Schritt 4 registriert haben.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-212">When creating the new key vault, select **Access policies** to add a new access policy for the application you just registered in Step 4.</span></span> <span data-ttu-id="6c2c2-213">Gewähren Sie der Anwendung die Berechtigung **Get**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-213">Grant the **Get** secret permissions to your application.</span></span> <span data-ttu-id="6c2c2-214">Dadurch kann Splunk, das als registrierte Anwendung fungiert, auf die in diesem Azure Key Vault gespeicherten Schlüssel (Geheimnisse) zugreifen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-214">This will allow Splunk, acting as the registered application, to access the keys (secrets) stored in this Azure key vault.</span></span>

    ![Zugriffsrichtlinien hinzufügen](../concepts/images/add-access-policies.png)

    <span data-ttu-id="6c2c2-216">Wählen Sie **Erstellen**, um die Erstellung Ihres neuen Azure Key Vault abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-216">Select **Create** to complete the creation of your new Azure key vault.</span></span>

3. <span data-ttu-id="6c2c2-217">Generieren Sie einen neuen geheimen Schlüssel im Key Vault, um den Zugriffsschlüssel für den Event Hub-Namespace zu speichern.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-217">Generate a new secret in your key vault to store the access key to your event hub namespace.</span></span> <span data-ttu-id="6c2c2-218">Rufen Sie zuerst den Zugriffsschlüssel für den Event Hub-Namespace ab, indem Sie den Event Hub-Namespace öffnen und die Option **Freigegebene Zugriffsrichtlinien** auswählen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-218">First, grab the access key to your event hub namespace by opening your event hub namespace and selecting **Shared access policies**.</span></span> <span data-ttu-id="6c2c2-219">Wählen Sie die **RootManageSharedAccessKey**-Richtlinie aus der Liste, und kopieren Sie den **Primärschlüssel** aus der Liste.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-219">Select the **RootManageSharedAccessKey** policy from the list and copy the **Primary Key** from the list.</span></span>

    ![Freigegebene Zugriffsrichtlinien abrufen](../concepts/images/get-shared-policies.png)

4. <span data-ttu-id="6c2c2-221">Öffnen Sie den Key Vault, und wählen Sie **Geheimnisse**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-221">Open your key vault and select **Secrets**.</span></span> <span data-ttu-id="6c2c2-222">Wählen Sie **Generieren/Importieren**, um dem Key Vault ein neues Geheimnis hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-222">Choose **Generate/Import** to add a new secret to the key vault.</span></span> <span data-ttu-id="6c2c2-223">Fügen Sie den **Primärschlüssel** aus dem Event Hub-Namespace **RootManageSharedAccessKey** ein.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-223">Paste in the **Primary key** from the event hub namespace **RootManageSharedAccessKey**.</span></span>

    ![Neuen geheimen Schlüssel generieren](../concepts/images/generate-new-secret.png)

5. <span data-ttu-id="6c2c2-225">Nachdem es erstellt wurde, wählen Sie das Geheimnis aus, und kopieren Sie die **Geheimnisversion** des Geheimnisses.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-225">After it's created, select the secret and copy the **Secret Version** of the secret.</span></span> <span data-ttu-id="6c2c2-226">Dies wird weiter unten in Schritt 6 verwendet, um Splunk-Dateneingaben zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-226">This will be used later in Step 6 to configure Splunk data inputs.</span></span>

    ![Version des geheimen Schlüssels](../concepts/images/secret-version.png)

## <a name="step-6-configure-the-splunk-data-inputs-to-consume-security-alerts-stored-in-the-event-hub"></a><span data-ttu-id="6c2c2-228">Schritt 6: Konfigurieren der Splunk-Dateneingaben zum Verbrauchen von Sicherheitswarnungen, die im Event Hub gespeichert sind</span><span class="sxs-lookup"><span data-stu-id="6c2c2-228">Step 6: Configure the Splunk data inputs to consume security alerts stored in the event hub</span></span>

<span data-ttu-id="6c2c2-229">Der letzte Schritt des Einrichtungsprozesses besteht darin, die Splunk-Dateneingaben so zu konfigurieren, dass sie den Event Hub, die Anwendung und die Geheimnisse nutzen, die Sie in den vorhergehenden Schritten erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-229">The last step to complete the setup process is to configure Splunk data inputs to utilize the event hub, application, and secrets you created in previous steps.</span></span>

1. <span data-ttu-id="6c2c2-230">Folgen Sie den Anweisungen im Thema [Splunk-Konfiguration](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Configuration-of-Splunk), um Splunk-Dateneingaben für das Azure Monitor-Add-On zu öffnen und zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-230">Follow the instructions in the [Configuration of Splunk](https://github.com/Microsoft/AzureMonitorAddonForSplunk/wiki/Configuration-of-Splunk) topic to open and configure Splunk data inputs for the Azure Monitor Add-on.</span></span> <span data-ttu-id="6c2c2-231">Wechseln Sie zu **Einstellungen** und **Dateneingaben**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-231">Go to **Settings** and **Data Inputs**.</span></span> <span data-ttu-id="6c2c2-232">Wählen Sie **Azure Monitor-Diagnoseprotokolle**.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-232">Choose **Azure Monitor Diagnostic Logs**.</span></span>
2. <span data-ttu-id="6c2c2-233">Wählen Sie **Neu**, und füllen Sie alle erforderlichen Felder mit den Werten aus, die Sie in den vorhergehenden Schritten erhalten haben.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-233">Select **New** and input all the required fields using the values obtained in the previous steps.</span></span> <span data-ttu-id="6c2c2-234">Die folgende Abbildung zeigt alle erforderlichen Felder mit den Werten aus den vorherigen Beispielen in diesem Artikel.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-234">The following image shows all the required fields using the values from the previous examples in this article.</span></span>

    ![Azure Monitor Felder](../concepts/images/azure-monitor-fields.png)

3. <span data-ttu-id="6c2c2-236">Wählen Sie **Weiter**, und suchen sie nach den Sicherheitswarnungen für Ihre Organisation, die von Azure Monitor abgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-236">Select **Next** and begin searching your organization’s security alerts ingested from Azure Monitor.</span></span>

## <a name="optional-use-splunk-search-to-explore-data"></a><span data-ttu-id="6c2c2-237">(Optional) Untersuchen von Daten mit der Splunk-Suche</span><span class="sxs-lookup"><span data-stu-id="6c2c2-237">(Optional) Use Splunk Search to explore data</span></span>

<span data-ttu-id="6c2c2-238">Nachdem Sie den Azure Monitor Splunk-Plug-in-Setup eingerichtet haben, wird Ihre Splunk-Instanz das Abrufen von Ereignissen aus dem konfigurierten Ereignis-Hub starten.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-238">After you have set up the Azure Monitor Splunk plugin, your Splunk instance will start retrieving events from the configured event hub.</span></span> <span data-ttu-id="6c2c2-239">Standardmäßig wird Splunk jede Eigenschaft des Graph-Sicherheitswarnungsschema indizieren, um die Suche zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-239">By default, splunk will index each property of the Microsoft Graph security alert schema to allow searching.</span></span>

<span data-ttu-id="6c2c2-240">Für die Suche nach Graph-Sicherheitswarnungen zum Erstellen von Dashboards oder Festlegen der Splunk-Warnungen mit Ihrer Suchabfrage navigieren Sie zu Apps -> Suche & Berichterstattungs-App in Splunk.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-240">To search for Microsoft Graph security alerts, to create dashboards, or to set Splunk alerts with your search query, navigate to apps -> Search & Reporting app in Splunk.</span></span>

<span data-ttu-id="6c2c2-241">**Beispiele**:</span><span class="sxs-lookup"><span data-stu-id="6c2c2-241">Examples:</span></span><br/>
<span data-ttu-id="6c2c2-242">Suchen Sie die Graph-Sicherheitswarnungen:</span><span class="sxs-lookup"><span data-stu-id="6c2c2-242">Try searching Graph Security alerts:</span></span>

- <span data-ttu-id="6c2c2-243">Geben Sie in der Suchleiste `sourcetype="amdl:securitygraph:alert"` ein, um alle Warnungen zu erhalten, die über die Graph-Sicherheits-API aufgetreten sind.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-243">Type `sourcetype="amdl:securitygraph:alert"` in the search bar to get all alerts surfaced through the graph security API.</span></span> <span data-ttu-id="6c2c2-244">Auf der rechten Seite sehen die Eigenschaften der obersten Ebene im Azure Monitor-Protokoll, wo sich die Graph-Sicherheitswarnungen unter dem Feld Eigenschaften befinden.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-244">On the right-hand side, you will see the top-level properties of Azure Monitor log where Graph Security alert is under properties field.</span></span><br/>
- <span data-ttu-id="6c2c2-245">Im linken Bereich sehen Sie die ausgewählten Felder und interessante Felder.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-245">On the left pane, you will see selected fields and interesting fields.</span></span> <span data-ttu-id="6c2c2-246">Sie können die ausgewählten Felder zum Erstellen von Dashboards oder Splunk-Warnungen verwenden und auch ausgewählte Felder hinzufügen oder entfernen, indem Sie mit der rechten Maustaste auf die Felder klicken.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-246">You can use selected fields to create dashboards or Splunk alerts, you can also add or remove selected fields by right-clicking on the fields.</span></span>  
> <span data-ttu-id="6c2c2-247">**Hinweis:** Wie in der nachstehenden Suchabfrage dargestellt, können Sie die Suche nach Bedarf einschränken.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-247">**Note:** As shown in the following search query, you can restrict your search as needed.</span></span> <span data-ttu-id="6c2c2-248">Im Beispiel filtern wir Graph-Sicherheitswarnungen mithilfe des Azure-Sicherheitscenter nach hohem Schweregrad.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-248">In the example, we filter the Graph Security Alerts by high severity alerts from Azure Security Center.</span></span> <span data-ttu-id="6c2c2-249">Wir verwendeten auch `eventDatetime`, `severity`, `status` und `provider` als ausgewählte Felder, die angezeigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-249">We also used `eventDatetime`, `severity`, `status`, and `provider` as selected fields to be displayed.</span></span> <span data-ttu-id="6c2c2-250">Erweiterte Suchbegriffe finden Sie unter [Splunk-Suche-Lernprogramme](http://docs.splunk.com/Documentation/Splunk/7.1.2/SearchTutorial/WelcometotheSearchTutorial).</span><span class="sxs-lookup"><span data-stu-id="6c2c2-250">For more advance search terms, see [splunk search tutorials](http://docs.splunk.com/Documentation/Splunk/7.1.2/SearchTutorial/WelcometotheSearchTutorial).</span></span>

 ![splunk_search_query](../concepts/images/splunk_search_query.png)
> <span data-ttu-id="6c2c2-252">Suchbegriffe: `sourcetype="amdl:securitygraph:alert" "properties.vendorInformation.provider"=ASC "properties.severity"=High | rename properties.eventDataTime as eventDateTime properties.severity as severity properties.vendorInformation.provider as provider properties.status as status`</span><span class="sxs-lookup"><span data-stu-id="6c2c2-252">search query`sourcetype="amdl:securitygraph:alert" "properties.vendorInformation.provider"=ASC "properties.severity"=High | rename properties.eventDataTime as eventDateTime properties.severity as severity properties.vendorInformation.provider as provider properties.status as status`</span></span>

<span data-ttu-id="6c2c2-253">Splunk ermöglicht auch mit der Menüoption "Speichern unter" in der Ecke rechts oben im Bildschirm mehrere Aktionen für Suchergebnisse.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-253">Splunk also allows multiple actions on search results using the "Save As" menu option in top right of the screen.</span></span> <span data-ttu-id="6c2c2-254">Sie können Berichte, Dashboards-Bereiche oder basierend auf Ihrer Suchfilter Warnungen erstellen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-254">You can create Reports, Dashboard Panels, or Alerts based on your search filter.</span></span>
<span data-ttu-id="6c2c2-255">Es folgt ein Beispiel für ein Dashboard mit einem Ereignisstrom, der auf der vorherigen Abfrage beruht: Sie können für jedes Ereignis einen Drilldown-Link hinzufügen, um weiter auf die Details auf der Microsoft Graph-Website zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-255">Below is an example of a dashboard with an event stream based on the previous query: You can add a drilldown link to each event to further access the details on Microsoft Graph site.</span></span> <span data-ttu-id="6c2c2-256">Siehe unter [Splunk-Drilldown-Dokumentation](http://docs.splunk.com/Documentation/Splunk/7.1.2/Viz/DrilldownIntro).</span><span class="sxs-lookup"><span data-stu-id="6c2c2-256">See [Splunk drilldown documentation](http://docs.splunk.com/Documentation/Splunk/7.1.2/Viz/DrilldownIntro).</span></span>

 ![splunk_search_results](../concepts/images/splunk_search_results.png)

<span data-ttu-id="6c2c2-258">Oder Sie können ein Dashboard als ein Timeline-Diagramm erstellen:</span><span class="sxs-lookup"><span data-stu-id="6c2c2-258">Or you can create a dashboard as a timeline chart:</span></span>

 ![splunk_search_timeline](../concepts/images/splunk_search_timeline.png)

<span data-ttu-id="6c2c2-260">Für weitere Einzelheiten können Sie dem[Splunk-Suche- & Bericht-Lernprogramm](http://docs.splunk.com/Documentation/Splunk/7.1.2/SearchTutorial/WelcometotheSearchTutorial) folgen.</span><span class="sxs-lookup"><span data-stu-id="6c2c2-260">You can follow [Splunk Search & Report tutorial](http://docs.splunk.com/Documentation/Splunk/7.1.2/SearchTutorial/WelcometotheSearchTutorial) for more details.</span></span>